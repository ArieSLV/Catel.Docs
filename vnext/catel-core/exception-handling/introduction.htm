<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Introduction - Catel documentation</title>
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../../css/theme_colors.css" type="text/css" />
    <link rel="stylesheet" href="../../css/styles/vs.css">
    <link rel="stylesheet" href="../../css/font-awesome.4.5.0.min.css">
</head>
<body role="document">
    <div class="grid-for-nav">
        <nav data-toggle="nav-shift" class="nav-side stickynav">
            <div class="side-nav-search">
                <a href="/"><i class="fa fa-home"></i> Catel documentation</a>
                <div role="search">
                    <form id="search-form" class="form" action="../../Docnet_search.htm" method="get">
                        <input type="text" name="q" placeholder="Search docs" />
                    </form>
                </div>
            </div>
            <div class="menu menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
<ul>
<li class="tocentry"><a href="../../Home.htm">Home</a>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../Introduction.htm">Introduction</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../FAQ.htm">FAQ</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../Setup,deployment&projects.htm">Setup, deployment & projects</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../Gettingstarted.htm">Getting started</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../Examples.htm">Examples</a></span>
</li>
<li class="tocentry">
<ul>
<li><span class="navigationgroup"><i class="fa fa-caret-down"></i> <a href="../../CatelCore.htm">Catel.Core</a></span></li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../ApiCop.htm">ApiCop</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../catel-core/argument-checking/index.htm">Argument checking</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../catel-core/caching/index.htm">Caching</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../catel-core/configuration/index.htm">Configuration</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../Datahandling.htm">Data handling</a></span>
</li>
<li class="tocentry">
<ul>
<li><span class="navigationgroup"><i class="fa fa-caret-down"></i> <a href="../../Exceptionhandling.htm">Exception handling</a></span></li>
<li class="tocentry current"><a class="current" href="../../catel-core/exception-handling/introduction.htm">Introduction</a>
<ul class="currentrelative">
<li class="tocentry"><a href="#setting-up-the-iexceptionservice">Setting up the IExceptionService</a></li>
<li class="tocentry"><a href="#executing-code-using-the-iexceptionservice">Executing code using the IExceptionService</a></li>
<li class="tocentry"><a href="#use-the-retry-capabilities">Use the retry capabilities</a></li>
<li class="tocentry"><a href="#handling-exceptions-manually">Handling exceptions manually</a></li>
<li class="tocentry"><a href="#unregistering-exceptions">Unregistering exceptions</a></li>
<li class="tocentry"><a href="#buffering">Buffering</a></li>
<li class="tocentry"><a href="#determine-if-an-exception-type-are-registered-for-handling">Determine if an exception type are registered for handling</a></li>
<li class="tocentry"><a href="#get-a-specific-exception-handler">Get a specific exception handler</a></li>
</ul>
<li class="tocentry"><a href="../../catel-core/exception-handling/wpf-implementation-for-exception-handling.htm">WPF implementation for exception handling</a>
</li>

</ul>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../IoC(ServiceLocator&TypeFactory).htm">IoC (ServiceLocator & TypeFactory)</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../Logging.htm">Logging</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../Messaging.htm">Messaging</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../Multilingual.htm">Multilingual</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../Parallelinvocation&tasks.htm">Parallel invocation & tasks</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../Pooling.htm">Pooling</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../Preventingmemoryleaks.htm">Preventing memory leaks</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../Reflection.htm">Reflection</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../Scoping.htm">Scoping</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../Serialization.htm">Serialization</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../Validation.htm">Validation</a></span>
</li>

</ul>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../CatelMVVM.htm">Catel.MVVM</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../tips-tricks/index.htm">Tips & tricks</a></span>
</li>

</ul>
				<div class="toc-footer">
					<span class="text-small">
						<hr/>
						<a href="https://github.com/FransBouma/DocNet" target="_blank">Made with <i class="fa fa-github"></i> DocNet</a>
					</span>
				</div>	
			</div>
            &nbsp;
        </nav>
        <section data-toggle="nav-shift" class="nav-content-wrap">
            <nav class="nav-top" role="navigation" aria-label="top navigation">
                <i data-toggle="nav-top" class="fa fa-bars"></i>
                <a href="../../index.htm">Catel documentation</a>
            </nav>
            <div class="nav-content">
                <div role="navigation" aria-label="breadcrumbs navigation">
                    <div class="breadcrumbs">
<ul><li><a href="../../Home.htm">Home</a></li> / <li><a href="../../CatelCore.htm">Catel.Core</a></li> / <li><a href="../../Exceptionhandling.htm">Exception handling</a></li> / <li><a href="../../catel-core/exception-handling/introduction.htm">Introduction</a></li></ul>
					
                    </div>
                    <hr />
                </div>
                <div role="main">
                    <div class="section">
<h1 id="exception-handling">Exception handling<a class="headerlink" href="#exception-handling" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h1>
<p>With exception handling in Catel, it is possible to create an exception handling policy and execute code in a safe way without have to check all the exception types manually. Catel exposes this technique via the IExceptionService.</p>
<p>/**/ Setting up the IExceptionService Executing code using the IExceptionService Executing an action Executing a function Use the retry capabilities Retry Immediately Retry defined Process with retry Subscribe to the retry events Handling exceptions manually Unregistering exceptions Buffering Define the way to buffer Subscribe to the buffering events Determine if an exception type are registered for handling Get a specific exception handler</p>
<p>Also see</p>
<p>WPF implementation for exception handling</p>
<h2 id="setting-up-the-iexceptionservice">Setting up the IExceptionService<a class="headerlink" href="#setting-up-the-iexceptionservice" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h2>
<p>It is important to register an exception in the service and let Catel know how it should be handled. The service handles exceptions in the way they are added to the IExceptionService.</p>
<p>The example below registers several exceptions and how they should be handled. When a <em>FileNotFoundException</em> occurs, it will show a message to the user. For any other exception, it will log the exception and show a message that the user should contact the developers.</p>
<pre class="nocode">var dependencyResolver = this.GetDependencyResolver();
var exceptionService = dependencyResolver .Resolve&lt;IExceptionService&gt;();

exceptionService.Register&lt;FileNotFoundException&gt;(exception =&gt; dependencyResolver.Resolve&lt;IMessageService&gt;().Show(exception.Message));
exceptionService.Register&lt;Exception&gt;(exception =&gt; 
{
    Log.Error(exception);
    dependencyResolver.Resolve&lt;IMessageService&gt;().Show(&quot;An unknown exception occurred, please contact the developers&quot;); 
});
</pre><p>The IExceptionService checks for type hierarchy. For example, when an exception as type Exception is registered, this handler will handle all exceptions</p>
<h2 id="executing-code-using-the-iexceptionservice">Executing code using the IExceptionService<a class="headerlink" href="#executing-code-using-the-iexceptionservice" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h2>
<p>The Process method is responsible to keep track of all exceptions which might occur and will handle them if they are registered. If one of your registered exceptions is thrown by the code, the Process method will handle it and perform the action defined while the registration operation (for example, by showing a message box).</p>
<p>The <em>Process</em> method comes in two flavors: as action and as function.</p>
<h3 id="executing-an-action">Executing an action<a class="headerlink" href="#executing-an-action" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h3>
<pre class="nocode">var dependencyResolver = this.GetDependencyResolver();
var exceptionService = dependencyResolver.Resolve&lt;IExceptionService&gt;();
exceptionService.Process(() =&gt; { throw new ArgumentOutOfRangeException(); });
</pre><h3 id="executing-a-function">Executing a function<a class="headerlink" href="#executing-a-function" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h3>
<pre class="nocode">var dependencyResolver = this.GetDependencyResolver();
var exceptionService = dependencyResolver.Resolve&lt;IExceptionService&gt;();
var result = exceptionService.Process&lt;int&gt;(() =&gt; 1 + 1);
</pre><p>You can process yours actions asynchronously by using the <strong><em>ProcessAsync</em></strong> method.</p>
<h2 id="use-the-retry-capabilities">Use the retry capabilities<a class="headerlink" href="#use-the-retry-capabilities" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h2>
<p>In some cases, you can want to have possibility to retry an action a certain number of times before finally handle your exception. Let see how the <em>IExceptionService</em> allows us to handle this kind of cases.</p>
<p>Firstly, you need to define how the <em>IExceptionService</em> will retry your action in case of error, two possibilities are provided for that.</p>
<h3 id="retry-immediately">Retry Immediately<a class="headerlink" href="#retry-immediately" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h3>
<p>When you setting up your exceptions on IExceptionService, you have to additionnally use the OnErrorRetryImmediately method like shown below :</p>
<pre class="nocode">var dependencyResolver = this.GetDependencyResolver();
var exceptionService = dependencyResolver.Resolve&lt;IExceptionService&gt;();
exceptionService.Register&lt;ArgumentNullException&gt;(exception =&gt; { /* Do something */ })
                .OnErrorRetryImmediately();
</pre><p>This method will say to the IExceptionService to retry the action each times this one throw an exception until it succeed and without to wait before the next retry.</p>
<p>You can also specify the number of times you want the <em>IExceptionService</em> to retry immediately like this for example : <em>OnErrorRetryImmediately(5)</em></p>
<h3 id="retry-defined">Retry defined<a class="headerlink" href="#retry-defined" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h3>
<p>You have also the possibility to define more deeply the way you want your actions to be retried by using the <em>OnErrorRetry</em> method like shown below.</p>
<pre class="nocode">var dependencyResolver = this.GetDependencyResolver();
var exceptionService = dependencyResolver.Resolve&lt;IExceptionService&gt;();
exceptionService.Register&lt;ArgumentNullException&gt;(exception =&gt; { /* Do something */ })
                .OnErrorRetry(5, TimeSpan.FromMinutes(2));
</pre><p>Where 5 represents the nombre of times the action will be retried and <em>TimeSpan.FromMinutes(2)</em> the interval between the retries.</p>
<h3 id="process-with-retry">Process with retry<a class="headerlink" href="#process-with-retry" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h3>
<p>If you have provided a retry policy, you can use the <em>ProcessWithRetry</em> method to expect have your policy applied on error. Below an example :</p>
<pre class="nocode">var dependencyResolver = this.GetDependencyResolver();
var exceptionService = dependencyResolver.Resolve&lt;IExceptionService&gt;();
exceptionService.ProcessWithRetry(() =&gt;
            {
                /* Do something */
            });
</pre><h3 id="subscribe-to-the-retry-events">Subscribe to the retry events<a class="headerlink" href="#subscribe-to-the-retry-events" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h3>
<p>Can you subscribe to the events which are thown each time an action is retried like this :</p>
<pre class="nocode">var dependencyResolver = this.GetDependencyResolver();
var exceptionService = dependencyResolver.Resolve&lt;IExceptionService&gt;();
exceptionService.RetryingAction +=
                (sender, eventArgs) =&gt;
                    Console.WriteLine(&quot;The '{0}' have caused retrying action for the '{1}' times.&quot;,
                        eventArgs.LastException, eventArgs.CurrentRetryCount);
</pre><h2 id="handling-exceptions-manually">Handling exceptions manually<a class="headerlink" href="#handling-exceptions-manually" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h2>
<p>It is possible to manually handle exceptions using the service. This is useful when you don't want to wrap code in the Process method, but still want to be able to create a generic exception handling policy.</p>
<pre class="nocode">var dependencyResolver = this.GetDependencyResolver();
var exceptionService = dependencyResolver.Resolve&lt;IExceptionService&gt;();

try
{
    var value = 150/0;
}
catch (DivideByZeroException exception)
{
    exceptionService.HandleException(exception);
}
</pre><p>If the exception can be handled, the registered action will be executed, but your code can safely continue. If the exception (in this case DivideByZeroException) is not registered, the HandleException method will rethrow the exception.</p>
<h2 id="unregistering-exceptions">Unregistering exceptions<a class="headerlink" href="#unregistering-exceptions" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h2>
<p>Although it will probably hardly used, it is possible to unregister exceptions again using the code below:</p>
<pre class="nocode">var exceptionService = dependencyResolver.Resolve&lt;IExceptionService&gt;();
exceptionService.Unregister&lt;ArgumentException&gt;();
</pre><h2 id="buffering">Buffering<a class="headerlink" href="#buffering" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h2>
<h3 id="define-the-way-to-buffer">Define the way to buffer<a class="headerlink" href="#define-the-way-to-buffer" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h3>
<p>You can want to throttle down the number of exceptions you receive when a production process goes awry for example. You can do it through the <em>UsingTolerance</em> extension method as shown below :</p>
<pre class="nocode">var dependencyResolver = this.GetDependencyResolver();
var exceptionService = dependencyResolver.Resolve&lt;IExceptionService&gt;();

exceptionService.Register&lt;DivideByZeroException&gt;(exception =&gt; { })
                .UsingTolerance(9, TimeSpan.FromSeconds(10.0));
</pre><p>Here, the idea is to only receive the 10<sup>th</sup> exception message.</p>
<h3 id="subscribe-to-the-buffering-events">Subscribe to the buffering events<a class="headerlink" href="#subscribe-to-the-buffering-events" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h3>
<p>Can you subscribe to the events which are thown each time an exception is buffered like this :</p>
<pre class="nocode">var dependencyResolver = this.GetDependencyResolver();
var exceptionService = dependencyResolver.Resolve&lt;IExceptionService&gt;();
exceptionService.ExceptionBuffered +=
                (sender, eventArgs) =&gt;
                    Console.WriteLine(&quot;The '{0}' is buffered for at '{1}'.&quot;,
                        eventArgs.BufferedException, eventArgs.DateTime);
</pre><h2 id="determine-if-an-exception-type-are-registered-for-handling">Determine if an exception type are registered for handling<a class="headerlink" href="#determine-if-an-exception-type-are-registered-for-handling" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h2>
<p>If you want to know if an exception type have its policy registered on the <em>IExceptionService</em>, you can do this by using the <em>IsExceptionRegistered</em> method like shown below :</p>
<pre class="nocode">var dependencyResolver = this.GetDependencyResolver();
var exceptionService = dependencyResolver.Resolve&lt;IExceptionService&gt;();
if (exceptionService.IsExceptionRegistered&lt;ArgumentNullException&gt;())
   {
       //Do something
   }
</pre><h2 id="get-a-specific-exception-handler">Get a specific exception handler<a class="headerlink" href="#get-a-specific-exception-handler" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h2>
<p>If you want to retrieve the registered exception handler for an exception type, you have to use the <em>GetHandler</em> method like shown below :</p>
<pre class="nocode">var dependencyResolver = this.GetDependencyResolver();
var exceptionService = dependencyResolver.Resolve&lt;IExceptionService&gt;();
var exceptionHandler = exceptionService.GetHandler&lt;ArgumentException&gt;();
</pre>
                    </div>
                </div>
                <footer>
                    <hr />
                    <div role="contentinfo">

                      <p>Is this section not up-to-date or found an issue? Please <a href="https://github.com/Catel/catel.github.io/blob/master/src/../src/vnext/catel-core/exception-handling/introduction.md" target="_blank">contribute</a>!</p>
                    </div>
                </footer>
            </div>
        </section>
    </div>
    <script src="../../js/jquery-2.1.1.min.js"></script>
    <script src="../../js/modernizr-2.8.3.min.js"></script>
    <script src="../../js/highlight.pack.js"></script>
    <script src="../../js/theme.js"></script>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    
      ga('create', 'UA-25600919-4', 'auto');
      ga('send', 'pageview');
    
    </script>
</body>
</html>
