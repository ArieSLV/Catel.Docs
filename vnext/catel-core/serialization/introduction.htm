<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Introduction - Catel documentation</title>
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../../css/theme_colors.css" type="text/css" />
    <link rel="stylesheet" href="../../css/styles/vs.css">
    <link rel="stylesheet" href="../../css/font-awesome.4.5.0.min.css">
</head>
<body role="document">
    <div class="grid-for-nav">
        <nav data-toggle="nav-shift" class="nav-side stickynav">
            <div class="side-nav-search">
                <a href="/"><i class="fa fa-home"></i> Catel documentation</a>
                <div role="search">
                    <form id="search-form" class="form" action="../../Docnet_search.htm" method="get">
                        <input type="text" name="q" placeholder="Search docs" />
                    </form>
                </div>
            </div>
            <div class="menu menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
<ul>
<li class="tocentry"><a href="../../Home.htm">Home</a>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../Introduction.htm">Introduction</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../FAQ.htm">FAQ</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../Setup,deployment&projects.htm">Setup, deployment & projects</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../Gettingstarted.htm">Getting started</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../Examples.htm">Examples</a></span>
</li>
<li class="tocentry">
<ul>
<li><span class="navigationgroup"><i class="fa fa-caret-down"></i> <a href="../../CatelCore.htm">Catel.Core</a></span></li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../ApiCop.htm">ApiCop</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../Argumentchecking.htm">Argument checking</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../Caching.htm">Caching</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../Configuration.htm">Configuration</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../Datahandling.htm">Data handling</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../Exceptionhandling.htm">Exception handling</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../IoC(ServiceLocator&TypeFactory).htm">IoC (ServiceLocator & TypeFactory)</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../Logging.htm">Logging</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../Messaging.htm">Messaging</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../Multilingual.htm">Multilingual</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../Parallelinvocation&tasks.htm">Parallel invocation & tasks</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../Pooling.htm">Pooling</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../Preventingmemoryleaks.htm">Preventing memory leaks</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../Reflection.htm">Reflection</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../Scoping.htm">Scoping</a></span>
</li>
<li class="tocentry">
<ul>
<li><span class="navigationgroup"><i class="fa fa-caret-down"></i> <a href="../../Serialization.htm">Serialization</a></span></li>
<li class="tocentry current"><a class="current" href="../../catel-core/serialization/introduction.htm">Introduction</a>
<ul class="currentrelative">
<li class="tocentry"><a href="#serializing-a-model">Serializing a model</a></li>
<li class="tocentry"><a href="#warming-up-serialization">Warming up serialization</a></li>
<li class="tocentry"><a href="#backwards-compatibility-for-binary-serialization">Backwards compatibility for binary serialization</a></li>
</ul>
<li class="tocentry"><a href="../../catel-core/serialization/specifying-what-gets-serialized.htm">Specifying what gets serialized</a>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../Customizingserialization.htm">Customizing serialization</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../Supportedserializers.htm">Supported serializers</a></span>
</li>

</ul>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../Validation.htm">Validation</a></span>
</li>

</ul>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../CatelMVVM.htm">Catel.MVVM</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../CatelFody.htm">Catel.Fody</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../CatelReSharper.htm">Catel.ReSharper</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../tips-tricks/index.htm">Tips & tricks</a></span>
</li>

</ul>
				<div class="toc-footer">
					<span class="text-small">
						<hr/>
						<a href="https://github.com/FransBouma/DocNet" target="_blank">Made with <i class="fa fa-github"></i> DocNet</a>
					</span>
				</div>	
			</div>
            &nbsp;
        </nav>
        <section data-toggle="nav-shift" class="nav-content-wrap">
            <nav class="nav-top" role="navigation" aria-label="top navigation">
                <i data-toggle="nav-top" class="fa fa-bars"></i>
                <a href="../../index.htm">Catel documentation</a>
            </nav>
            <div class="nav-content">
                <div role="navigation" aria-label="breadcrumbs navigation">
                    <div class="breadcrumbs">
<ul><li><a href="../../Home.htm">Home</a></li> / <li><a href="../../CatelCore.htm">Catel.Core</a></li> / <li><a href="../../Serialization.htm">Serialization</a></li> / <li><a href="../../catel-core/serialization/introduction.htm">Introduction</a></li></ul>
					
                    </div>
                    <hr />
                </div>
                <div role="main">
                    <div class="section">
<h1 id="introduction-to-serialization">Introduction to serialization<a class="headerlink" href="#introduction-to-serialization" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h1>
<h2 id="serializing-a-model">Serializing a model<a class="headerlink" href="#serializing-a-model" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h2>
<p>The code below shows how to save an object (which can, of course, be a complex graph of nested objects):</p>
<pre class="nocode">var myObject = new MyObject();
 
using (var fileStream = File.Create(@&quot;C:\myobject.dob&quot;))
{
    myObject.Save(fileStream);
}
</pre><p>Looks too easy, but this really is the only thing you need to do. You can specify the serialization mode in the several available overloads of the Save method.</p>
<p>Loading is as easy as saving, as you can see in the following code:</p>
<pre class="nocode">MyObject myObject = null;
 
using (var fileStream = File.Open(@&quot;C:\myobject.dob&quot;, FileMode.Open))
{
    myObject = ModelBase.Load&lt;MyObject&gt;(fileStream, SerializationMode.Xml);    
}
</pre><div class="alert alert-info"><span class="alert-title"><i class="fa fa-info-circle"></i> Info</span><p>Note that for a model to support the <em>Save</em> and <em>Load</em> methods, it must derive from <em>SavableModelBase</em></p>
</div><h2 id="warming-up-serialization">Warming up serialization<a class="headerlink" href="#warming-up-serialization" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h2>
<p>The first time a serializer needs to serialize an object, it needs to perform some reflection to gather all the required information. This can have a negative impact on performance for the end-user during serialization. This load cannot be prevented, but it is possible to warmup the serializer at any time when it is convenient (for example, during startup of the application).</p>
<h3 id="warming-up-specific-types">Warming up specific types<a class="headerlink" href="#warming-up-specific-types" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h3>
<p>This code will warm up all the specified types:</p>
<pre class="nocode">var typesToWarmup = new type[] {  typeof(Settings) };
 
var xmlSerializer = SerializationFactory.GetXmlSerializer();
xmlSerializer.Warmup(typesToWarmup);
 
var binarySerializer = SerializationFactory.GetBinarySerializer();
binarySerializer.Warmup(typesToWarmup);
</pre><h3 id="warming-up-automatically">Warming up automatically<a class="headerlink" href="#warming-up-automatically" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h3>
<p>This code will warm up all types implementing the *ModelBase *class:</p>
<pre class="nocode">var xmlSerializer = SerializationFactory.GetXmlSerializer();
xmlSerializer.Warmup();
 
var binarySerializer = SerializationFactory.GetBinarySerializer();
binarySerialzier.Warmup();
</pre><div class="alert alert-danger"><span class="alert-title"><i class="fa fa-times-circle"></i> Danger!</span><p>Note that warming up for all types <strong>might</strong> take a serious amount of time and <strong>might</strong> increase the memory footprint of your application depending on the number of models</p>
</div><h3 id="warming-up-using-multiple-threads">Warming up using multiple threads<a class="headerlink" href="#warming-up-using-multiple-threads" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h3>
<p>By default, Catel will optimize the initialization and dispatch them to different threads. Using extensive testing, the Catel team discovered that approximately 1000 types / thread is the ideal load balancing (otherwise the spawning of the threads is more expensive than it handling it on the same thread). If this behavior needs to be customized, simply provide the number of types per thread. If <em>-1</em> is specified, all types will be warmed up in a single thread.</p>
<p>The code example below shows how to initialize all types deriving from <em>ModelBase</em> on a single thread:</p>
<pre class="nocode">var xmlSerializer = SerializationFactory.GetXmlSerializer();
xmlSerialzier.Warmup(null, -1);
</pre><h2 id="backwards-compatibility-for-binary-serialization">Backwards compatibility for binary serialization<a class="headerlink" href="#backwards-compatibility-for-binary-serialization" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h2>
<p>This example shows how an “old” (standard .NET) data class that uses custom binary serialization can easily be converted to a <em>ModelBase</em> to use the <em>ModelBase</em> even for all your existing classes.</p>
<p>Declare a new <em>ModelBase</em> class (remember the <em>‘dataobject’</em> code snippet). If the new class is in a new assembly, or has a new name or namespace, use the <em>RedirectType</em> attribute to let the <em>ModelBase</em> know that when it finds the old type, it should deserialize that type into the new type.</p>
<p>Then, by default, the <em>ModelBase</em> class will try to deserialize the old object. If it fails to do so, it will fall back on the default values provided by the property declarations. However, it is also possible to override the <em>GetDataFromSerializationInfo</em> method:</p>
<pre class="nocode">/// &lt;summary&gt;
/// Retrieves the actual data from the serialization info.
/// &lt;/summary&gt;
/// &lt;remarks&gt;
/// This method should only be implemented if backwards compatibility should be implemented for
/// a class that did not previously implement the ModelBase class.
/// &lt;/remarks&gt;
protected override void GetDataFromSerializationInfo(SerializationInfo info)
{
    // Check if deserialization succeeded
    if (DeserializationSucceeded)
    {
        return;
    }

    // Deserialization did not succeed for any reason, so retrieve the values manually
    // Luckily there is a helper class (SerializationHelper) 
    // that eases the deserialization of &quot;old&quot; style objects
    FirstName = SerializationHelper.GetString(info, &quot;FirstName&quot;, FirstNameProperty.GetDefaultValue());
    LastName = SerializationHelper.GetString(info, &quot;LastName&quot;, LastNameProperty.GetDefaultValue());
}
</pre>
                    </div>
                </div>
                <footer>
                    <hr />
                    <div role="contentinfo">

                      <p>Is this section not up-to-date or found an issue? Please <a href="https://github.com/Catel/catel.github.io/blob/master/src/../src/vnext/catel-core/serialization/introduction.md" target="_blank">contribute</a>!</p>
                    </div>
                </footer>
            </div>
        </section>
    </div>
    <script src="../../js/jquery-2.1.1.min.js"></script>
    <script src="../../js/modernizr-2.8.3.min.js"></script>
    <script src="../../js/highlight.pack.js"></script>
    <script src="../../js/theme.js"></script>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    
      ga('create', 'UA-25600919-4', 'auto');
      ga('send', 'pageview');
    
    </script>
</body>
</html>
