<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>FileLogListener - Catel documentation</title>
    <link rel="shortcut icon" href="../../../../favicon.ico">
    <link rel="stylesheet" href="../../../../css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../../../../css/theme_colors.css" type="text/css" />
    <link rel="stylesheet" href="../../../../css/styles/vs.css">
    <link rel="stylesheet" href="../../../../css/font-awesome.4.5.0.min.css">
</head>
<body role="document">
    <div class="grid-for-nav">
        <nav data-toggle="nav-shift" class="nav-side stickynav">
            <div class="side-nav-search">
                <a href="/welcome/index.htm"><i class="fa fa-home"></i> Catel documentation</a>
                <div role="search">
                    <form id="search-form" class="form" action="../../../../Docnet_search.htm" method="get">
                        <input type="text" name="q" placeholder="Search docs" />
                    </form>
                </div>
            </div>
            <div class="menu menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
<ul>
<li class="tocentry"><a href="../../../../home.htm">Home</a>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../../../introduction/">Introduction</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../../../faq/">FAQ</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../../../setup-deployment/">Setup, deployment & projects</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../../../getting-started/">Getting started</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../../../examples/">Examples</a></span>
</li>
<li class="tocentry">
<ul>
<li><span class="navigationgroup"><i class="fa fa-caret-down"></i> <a href="../../../../catel-core/">Catel.Core</a></span></li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../../../catel-core/apicop/">ApiCop</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../../../catel-core/argument-checking/">Argument checking</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../../../catel-core/caching/">Caching</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../../../catel-core/configuration/">Configuration</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../../../catel-core/data-handling/">Data handling</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../../../catel-core/exception-handling/">Exception handling</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../../../catel-core/ioc/">IoC (ServiceLocator & TypeFactory)</a></span>
</li>
<li class="tocentry">
<ul>
<li><span class="navigationgroup"><i class="fa fa-caret-down"></i> <a href="../../../../catel-core/logging/">Logging</a></span></li>
<li class="tocentry"><a href="../../../../catel-core/logging/introduction/">Introduction</a>
</li>
<li class="tocentry">
<ul>
<li><span class="navigationgroup"><i class="fa fa-caret-down"></i> <a href="../../../../catel-core/logging/log-listeners/">Log Listeners</a></span></li>
<li class="tocentry"><a href="../../../../catel-core/logging/log-listeners/batch-log-listeners/">Batch log listeners</a>
</li>
<li class="tocentry"><a href="../../../../catel-core/logging/log-listeners/console-log-listener/">ConsoleLogListener</a>
</li>
<li class="tocentry"><a href="../../../../catel-core/logging/log-listeners/debug-log-listener/">DebugLogListener</a>
</li>
<li class="tocentry"><a href="../../../../catel-core/logging/log-listeners/event-log-listener/">EventLogListener</a>
</li>
<li class="tocentry"><a href="../../../../catel-core/logging/log-listeners/event-tracing-for-windows/">Event Tracing for Windows (ETW)</a>
</li>
<li class="tocentry current"><a class="current" href="../../../../catel-core/logging/log-listeners/file-log-listener/">FileLogListener</a>
<ul class="currentrelative">
<li class="tocentry"><a href="#specifying-the-path">Specifying the path</a></li>

<li class="tocentry"><a href="#creating-a-custom-listener">Creating a custom listener</a></li>

<li class="tocentry"><a href="#registering-the-listener">Registering the listener</a></li>



</ul>
<li class="tocentry"><a href="../../../../catel-core/logging/log-listeners/rolling-in-memory-log-listener/">RollingInMemoryLogListener</a>
</li>
<li class="tocentry"><a href="../../../../catel-core/logging/log-listeners/seq-log-listener/">SeqLogListener</a>
</li>

</ul>
</li>
<li class="tocentry"><a href="../../../../catel-core/logging/customizing-listeners/">Customizing listeners</a>
</li>
<li class="tocentry"><a href="../../../../catel-core/logging/creating-log-listeners-via-configuration/">Creating log listeners via configuration</a>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../../../catel-core/logging/integration-with-external-loggers/">Integration with external loggers</a></span>
</li>
<li class="tocentry"><a href="../../../../catel-core/logging/anotar-catel-fody/">Anotar.Catel.Fody</a>
</li>

</ul>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../../../catel-core/messaging/">Messaging</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../../../catel-core/multilingual/">Multilingual</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../../../catel-core/parallel-invocation-tasks/">Parallel invocation & tasks</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../../../catel-core/pooling/">Pooling</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../../../catel-core/preventing-memory-leaks/">Preventing memory leaks</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../../../catel-core/reflection/">Reflection</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../../../catel-core/scoping/">Scoping</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../../../catel-core/serialization/">Serialization</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../../../catel-core/validation/">Validation</a></span>
</li>

</ul>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../../../catel-mvvm/">Catel.MVVM</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../../../catel-fody/">Catel.Fody</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../../../catel-resharper/">Catel.ReSharper</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../../../tips-tricks/">Tips & tricks</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../../../reference/">API reference</a></span>
</li>

</ul>
				<div class="toc-footer">
					<span class="text-small">
						<hr/>
						<a href="https://github.com/FransBouma/DocNet" target="_blank">Made with <i class="fa fa-github"></i> DocNet</a>
					</span>
				</div>	
			</div>
            &nbsp;
        </nav>
        <section data-toggle="nav-shift" class="nav-content-wrap">
            <nav class="nav-top" role="navigation" aria-label="top navigation">
                <i data-toggle="nav-top" class="fa fa-bars"></i>
                <a href="../../../../index.htm">Catel documentation</a>
            </nav>
            <div class="nav-content">
                <div role="navigation" aria-label="breadcrumbs navigation">
                    <div class="breadcrumbs">
<ul><li><a href="../../../../home.htm">Home</a></li> / <li><a href="../../../../catel-core/index.htm">Catel.Core</a></li> / <li><a href="../../../../catel-core/logging/index.htm">Logging</a></li> / <li><a href="../../../../catel-core/logging/log-listeners/index.htm">Log Listeners</a></li> / <li><a href="../../../../catel-core/logging/log-listeners/file-log-listener/index.htm">FileLogListener</a></li></ul>

                    </div>
                    <hr />
                </div>
                <div role="main">
                    <div class="section">
<h1 id="fileloglistener">FileLogListener<a class="headerlink" href="#fileloglistener" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h1>
<p>Catel also supports very lightweight listeners to allow external logging libraries to hook on. To create a listener, first create a new class that implements the <em>ILogListener</em> interface. Next, register it in the <em>LogManager</em> using the <em>LogManager.AddListener</em> method.</p>
<p>The ILogListener has a separate method for each LogEvent, but also has a shared method that is called for each log event. For example, if a debug message is written to the log, both the Write and Debug methods are invoked on the ILogListener.</p>
<div class="alert alert-info"><span class="alert-title"><i class="fa fa-info-circle"></i> Info</span><p>For an example which writes to disk in batches, see the <a href="Batch_log_listeners">batch log event listeners</a></p>
</div><div class="alert alert-warning"><span class="alert-title"><i class="fa fa-warning"></i> Important!</span><p>Note that Catel already contains a FileLogListener and there is no need to reproduce this class. It only acts as an example that is easy to understand</p>
</div><h2 id="specifying-the-path">Specifying the path<a class="headerlink" href="#specifying-the-path" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h2>
<p>The default <em>FileLogListener</em> that ships with Catel allows the customization of the file name and the size of the log file. If no size is specified, the max log file size will default to 10 MB. </p>
<p>There are several constants inside the file name that can be used:</p>
<p><em>{AppData}</em></p>
<p>The application data directory that is used by all users.</p>
<p>Based on the entry assembly. For example <code>%ProgramData%\[company]\[product]\.</code></p>
<p>*<em>Note: Currently this writes to <code>%ProgramData%</code> only if HttpContext.Current evaluates to an object (e.g. a web app); otherwise it uses %AppData%</em>.
*</p>
<p><em>{AppDataLocal}</em></p>
<p>The local application data directory that is used by the current, non-roaming user.</p>
<p>Based on the entry assembly. For example <code>%LocalAppData%\[company]\product]\</code>.</p>
<p><em>{AppDataRoaming}</em></p>
<p>The roaming application data directory that is used by the current roaming user.</p>
<p>Based on the entry assembly. For example <code>%AppData%\[company]\[product]\</code>.</p>
<p><em>{AppDataMachine}</em></p>
<p>The application data directory that is used by all users.</p>
<p>Based on the entry assembly. For example <code>%ProgramData%\[company]\[product]\</code>.</p>
<p><em>{AppDir}</em></p>
<p>The directory of the current application (i.e. <code>AppDomain.CurrentDomain.BaseDirectory</code>).</p>
<p><em>{AssemblyCompany}</em></p>
<p>The assembly company.</p>
<p><em>{AssemblyName}</em></p>
<p>The assembly name.</p>
<p><em>{AssemblyProduct}</em></p>
<p>The assembly product.</p>
<p><em>{AutoLogFileName}</em></p>
<p>Creates a log file with the following format: <code>{</code><em><code>AssemblyName}_{Date}_{Time}_{ProcessId}</code>.</em></p>
<p><em>{Date}</em></p>
<p>The date as <em><code>yyyy-MM-dd</code>.</em></p>
<p><em>{Time}</em></p>
<p>The time as <em><code>HHmmss</code>.</em></p>
<p><em>{ProcessId}</em></p>
<p>The process id.</p>
<p><em>{WorkDir}</em></p>
<p>The application execution directory.  Calls <code>Directory.GetCurrentDirectory()</code>, internally.</p>
<p>A good example would be:</p>
<pre class="nocode">var fileLogListener = new FileLogListener();
fileLogListener.FilePath = &quot;{AppDir}\{AutoLogFileName}&quot;;
 
LogManager.AddListener(fileLogListener);
</pre><div class="alert alert-info"><span class="alert-title"><i class="fa fa-info-circle"></i> Info</span><p>Note that the default path of the <em>FileLogListener</em> is <em>{AppData}\{AutoLogFileName}</em></p>
</div><h2 id="creating-a-custom-listener">Creating a custom listener<a class="headerlink" href="#creating-a-custom-listener" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h2>
<p>A listener can be created by creating a new class deriving from LogListenerBase.</p>
<pre class="nocode">public class FileLogListener : LogListenerBase
{
    private readonly TextWriter _textWriter;

    public FileLogListener(string fileName)
    {
        Argument.IsNotNullOrWhitespace(&quot;fileName&quot;, fileName);
        FileName = fileName;

        _textWriter = new StreamWriter(fileName, true);
    }

    public string FileName { get; private set; }

    public override void Write(ILog log, string message, LogEvent logEvent)
    {
        _textWriter.WriteLine(message);
    }
}
</pre><h2 id="registering-the-listener">Registering the listener<a class="headerlink" href="#registering-the-listener" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h2>
<p> Last but not least, it is important to register the listener:</p>
<pre class="nocode">LogManager.AddListener(new FileLogListener(&quot;&lt;log_file_path&gt;&quot;));
</pre>
                    </div>
                </div>
                <footer>
                    <hr />
                    <div role="contentinfo">

                      <p>
					    Is this section not up-to-date or found an issue? Please <a href="https://github.com/Catel/Catel.Docs/blob/master/src/../src/vnext/catel-core/logging/log-listeners/file-log-listener.md" target="_blank">contribute</a>!
					  </p>
					  <p>
					    Have a question about Catel? Use <a href="https://stackoverflow.com/questions/tagged/catel" target="_blank">StackOverflow</a> with the <i>Catel</i> tag!
					  </p>
					  <hr />
					  <p>
					    <h2>Discussion</h2>
					   <div id="disqus_thread"></div>
					   <script>
					   var disqus_config = function () {
					   // Always use vNext so comments stay visible
					   this.page.url = 'http://docs.catelproject.com/vnext/catel-core/logging/log-listeners/file-log-listener/index.htm';
					   this.page.identifier = '../src/vnext/catel-core/logging/log-listeners/file-log-listener.md';
					   };
					   (function() { // DON'T EDIT BELOW THIS LINE
					   var d = document, s = d.createElement('script');
					   s.src = 'https://catel-docs.disqus.com/embed.js';
					   s.setAttribute('data-timestamp', +new Date());
					   (d.head || d.body).appendChild(s);
					   })();
					   </script>
					   <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
					  </p>
					</div>
                </footer>
            </div>
        </section>
    </div>
    <script src="../../../../js/jquery-2.1.1.min.js"></script>
    <script src="../../../../js/modernizr-2.8.3.min.js"></script>
    <script src="../../../../js/highlight.pack.js"></script>
    <script src="../../../../js/theme.js"></script>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    
      ga('create', 'UA-25600919-4', 'auto');
      ga('send', 'pageview');
    
    </script>
</body>
</html>
