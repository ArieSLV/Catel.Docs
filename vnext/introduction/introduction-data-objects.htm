<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Introduction to data objects - Catel documentation</title>
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../css/theme_colors.css" type="text/css" />
    <link rel="stylesheet" href="../css/styles/vs.css">
    <link rel="stylesheet" href="../css/font-awesome.4.5.0.min.css">
</head>
<body role="document">
    <div class="grid-for-nav">
        <nav data-toggle="nav-shift" class="nav-side stickynav">
            <div class="side-nav-search">
                <a href="../index.htm"><i class="fa fa-home"></i> Catel documentation</a>
                <div role="search">
                    <form id="search-form" class="form" action="../Docnet_search.htm" method="get">
                        <input type="text" name="q" placeholder="Search docs" />
                    </form>
                </div>
            </div>
            <div class="menu menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
<ul>
<li class="tocentry"><a href="../Home.htm">Home</a>
</li>
<li class="tocentry">
<ul>
<li><span class="navigationgroup"><i class="fa fa-caret-down"></i> <a href="../Introduction.htm">Introduction</a></span></li>
<li class="tocentry"><a href="../introduction/introduction.htm">Introduction</a>
</li>
<li class="tocentry"><a href="../introduction/why-catel.htm">Why Catel?</a>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../Platformsupport.htm">Platform support</a></span>
</li>
<li class="tocentry current"><a class="current" href="../introduction/introduction-data-objects.htm">Introduction to data objects</a>
<ul class="currentrelative">
<li class="tocentry"><a href="#the-observableobject-class">The ObservableObject class</a></li>
<li class="tocentry"><a href="#the-modelbase-class">The ModelBase class</a></li>
<li class="tocentry"><a href="#creating-your-first-data-object">Creating your first data object</a></li>
<li class="tocentry"><a href="#declaring-properties">Declaring properties</a></li>
<li class="tocentry"><a href="#adding-validation">Adding validation</a></li>
<li class="tocentry"><a href="#saving-objects">Saving objects</a></li>
</ul>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../IntroductiontoMVVM.htm">Introduction to MVVM</a></span>
</li>

</ul>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../FAQ.htm">FAQ</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../Setup,deployment&projects.htm">Setup, deployment & projects</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../Gettingstarted.htm">Getting started</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../Examples.htm">Examples</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../CatelCore.htm">Catel.Core</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../CatelMVVM.htm">Catel.MVVM</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../tips-tricks/index.htm">Tips & tricks</a></span>
</li>

</ul>
				<div class="toc-footer">
					<span class="text-small">
						<hr/>
						<a href="https://github.com/FransBouma/DocNet" target="_blank">Made with <i class="fa fa-github"></i> DocNet</a>
					</span>
				</div>	
			</div>
            &nbsp;
        </nav>
        <section data-toggle="nav-shift" class="nav-content-wrap">
            <nav class="nav-top" role="navigation" aria-label="top navigation">
                <i data-toggle="nav-top" class="fa fa-bars"></i>
                <a href="../index.htm">Catel documentation</a>
            </nav>
            <div class="nav-content">
                <div role="navigation" aria-label="breadcrumbs navigation">
                    <div class="breadcrumbs">
<ul><li><a href="../Home.htm">Home</a></li> / <li><a href="../Introduction.htm">Introduction</a></li> / <li><a href="../introduction/introduction-data-objects.htm">Introduction to data objects</a></li></ul>
					
                    </div>
                    <hr />
                </div>
                <div role="main">
                    <div class="section">
<h1 id="introduction-to-data-objects">Introduction to data objects<a class="headerlink" href="#introduction-to-data-objects" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h1>
<p>It is very important to understand the data objects in Catel because they form the base pillar of all components used by the MVVM framework.</p>
<ul>
<li><a href="#Introductiontodataobjects-TheObservableObjectclass">The ObservableObject class</a></li>
<li><a href="#Introductiontodataobjects-TheModelBaseclass">The ModelBase class</a></li>
<li><a href="#Introductiontodataobjects-Creatingyourfirstdataobject">Creating your first data object</a></li>
<li>
<a href="#Introductiontodataobjects-Declaringproperties">Declaring properties</a>
<ul>
<li><a href="#Introductiontodataobjects-Simpleproperties">Simple properties</a></li>
<li><a href="#Introductiontodataobjects-Propertieswithpropertychangecallback">Properties with property change callback</a></li>
</ul>
</li>
<li><a href="#Introductiontodataobjects-Addingvalidation">Adding validation</a></li>
<li>
<a href="#Introductiontodataobjects-Savingobjects">Saving objects</a>
<ul>
<li><a href="#Introductiontodataobjects-Loadinganobject">Loading an object</a></li>
<li><a href="#Introductiontodataobjects-Savinganobject">Saving an object</a></li>
</ul>
</li>
</ul>
<h2 id="the-observableobject-class">The ObservableObject class<a class="headerlink" href="#the-observableobject-class" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h2>
<p>Very basic class implementing the System.ComponentModel.INotifyPropertyChanging and T:System.ComponentModel.INotifyPropertyChanged interfaces as well as Catels Catel.Data.IAdvancedNotifyPropertyChanging and Catels Catel.Data.IAdvancedNotifyPropertyChanged.</p>
<h2 id="the-modelbase-class">The ModelBase class<a class="headerlink" href="#the-modelbase-class" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h2>
<p>The <a href="https://catelproject.atlassian.net/wiki/display/CTL/ModelBase" target="_blank"><em>ModelBase</em> </a>(previously known as the <em>DataObjectBase)</em> class is a generic base class that can be used for all your data classes. This comes fully supporting serialization, property changed notifications, backwards compatibility and error checking.</p>
<h2 id="creating-your-first-data-object">Creating your first data object<a class="headerlink" href="#creating-your-first-data-object" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h2>
<p>First of all, it is very important to realize that you shouldn't bore yourself with writing all the code below yourself. Catel contains lots of code snippets that allow you to create data objects very easily in a short amount of time.</p>
<p>This example shows the simplest way to declare a data object using the <em>ModelBase</em> class. By using a code snippet, the class is created in just 10 seconds.</p>
<p><strong>Code snippets</strong></p>
<ul>
<li>model - Declares a data object based on the <em>ModelBase</em> class</li>
</ul>
<p><strong>Steps</strong></p>
<ol>
<li>Create a new class file called <em>FirstModel.cs</em>.</li>
<li>Inside the namespace, use the <em>model</em> codesnippet and fill in the name of the class, in this case <em>FirstModel</em>.</li>
</ol>
<p><strong>Code</strong></p>
<pre class="nocode">{.java data-syntaxhighlighter-params=&quot;brush: java; gutter: false; theme: Confluence&quot; data-theme=&quot;Confluence&quot; style=&quot;brush: java; gutter: false; theme: Confluence&quot;}
/// &lt;summary&gt; 
/// FirstModel class which fully supports serialization, property changed notifications,
/// backwards compatibility and error checking.
/// &lt;/summary&gt; 
[Serializable]
public class FirstModel : ModelBase
{
    #region Fields
    #endregion

    #region Constructors
    /// &lt;summary&gt; 
    /// Initializes a new object from scratch.
    /// &lt;/summary&gt; 
    public FirstModel()
    { }

    /// &lt;summary&gt;
    /// Initializes a new object based on &lt;see cref=&quot;SerializationInfo&quot;/&gt;.
    /// &lt;/summary&gt; 
    /// &lt;param name=&quot;info&quot;&gt;&lt;see cref=&quot;SerializationInfo&quot;/&gt; that contains the information.
    /// &lt;/param&gt; 
    /// &lt;param name=&quot;context&quot;&gt;&lt;see cref=&quot;StreamingContext&quot;/&gt;.&lt;/param&gt; 
    protected FirstModel(SerializationInfo info, StreamingContext context)
        : base(info, context) { }
    #endregion 

    #region Properties
    // TODO: Define your custom properties here using the propdata code snippet
    #endregion 

    #region Methods
    /// &lt;summary&gt;
    /// Validates the field values of this object. Override this method to enable
    /// validation of field values.
    /// &lt;/summary&gt;
    /// &lt;param name=&quot;validationResults&quot;&gt;The validation results, add additional results to this list.&lt;/param&gt;
    protected override void ValidateFields(List&lt;FieldValidationResult&gt; validationResults)
    {
    }

    /// &lt;summary&gt;
    /// Validates the field values of this object. Override this method to enable
    /// validation of field values.
    /// &lt;/summary&gt;
    /// &lt;param name=&quot;validationResults&quot;&gt;The validation results, add additional results to this list.&lt;/param&gt;
    protected override void ValidateBusinessRules(List&lt;BusinessRuleValidationResult&gt; validationResults)
    {
    }
    #endregion 
}
</pre><h2 id="declaring-properties">Declaring properties<a class="headerlink" href="#declaring-properties" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h2>
<p>The next step to learn on the <em>ModelBase</em> class is how to declare properties. There are several types of properties, and they will all be handled in this part of the documentation.</p>
<p>The <em>ModelBase</em> class uses a dependency property a-like notation of properties.</p>
<h3 id="simple-properties">Simple properties<a class="headerlink" href="#simple-properties" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h3>
<p>This example shows how to declare the simplest property. In this example, a string property with a default value will be declared with the use of a code snippet.</p>
<p><strong>Code snippets</strong></p>
<ul>
<li>modelprop - Declares a simple property on a model</li>
</ul>
<p><strong>Steps</strong></p>
<ol>
<li>Open <em>FirstModel.cs</em> created in the previous step.</li>
<li>In the Properties region, use the code snippet <em>modelprop</em>, and use the following values:</li>
</ol>
<p>Code snippet item</p>
<p>Value</p>
<p>description</p>
<p>Gets or sets the simple property</p>
<p>type</p>
<p>string</p>
<p>name</p>
<p>SimpleProperty</p>
<p>defaultvalue</p>
<p>&quot;Simple property&quot;</p>
<p><strong>Code</strong></p>
<pre class="nocode">{.java data-syntaxhighlighter-params=&quot;brush: java; gutter: false; theme: Confluence&quot; data-theme=&quot;Confluence&quot; style=&quot;brush: java; gutter: false; theme: Confluence&quot;}
/// &lt;summary&gt; 
/// Gets or sets the simple property.
/// &lt;/summary&gt; 
public string SimpleProperty
{
    get { return GetValue&lt;string&gt;(SimplePropertyProperty); }
    set { SetValue(SimplePropertyProperty, value); }
}

/// &lt;summary&gt; 
/// Register the SimpleProperty property so it is known in the class.
/// &lt;/summary&gt; 
public static readonly PropertyDataSimplePropertyProperty = RegisterProperty(&quot;SimpleProperty&quot;, typeof(string), &quot;Simple property&quot;);
</pre><h3 id="properties-with-property-change-callback">Properties with property change callback<a class="headerlink" href="#properties-with-property-change-callback" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h3>
<p><strong>Code snippets</strong></p>
<ul>
<li>modelpropchanged - Declares a simple property on a model with a property changed callback</li>
</ul>
<p><strong>Steps</strong></p>
<ol>
<li>Open <em>FirstModel.cs</em> created in the previous step.</li>
<li>In the Properties region, use the code snippet <em>modelpropchanged</em>, and use the following values:</li>
</ol>
<p>Code snippet item</p>
<p>Value</p>
<p>description</p>
<p>Gets or sets the callback property</p>
<p>type</p>
<p>string</p>
<p>name</p>
<p>CallbackProperty</p>
<p>defaultvalue</p>
<p>&quot;Callback property&quot;</p>
<p><strong>Code</strong></p>
<pre class="nocode">{.java data-syntaxhighlighter-params=&quot;brush: java; gutter: false; theme: Confluence&quot; data-theme=&quot;Confluence&quot; style=&quot;brush: java; gutter: false; theme: Confluence&quot;}
/// &lt;summary&gt; 
/// Gets or sets the callback property.
/// &lt;/summary&gt; 
public string CallbackProperty
{
    get { return GetValue&lt;string&gt;(CallbackPropertyProperty); }
    set { SetValue(CallbackPropertyProperty, value); }
}

/// &lt;summary&gt; 
/// Register the CallbackProperty property so it is known in the class.
/// &lt;/summary&gt; 
public static readonly PropertyDataCallbackPropertyProperty = RegisterProperty(&quot;CallbackProperty&quot;, typeof(string), &quot;Callback property&quot;, 
    (sender, e) =&gt; ((FirstDataObject)sender).OnCallbackPropertyChanged());

/// &lt;summary&gt; 
/// Called when the CallbackProperty property has changed.
/// &lt;/summary&gt; 
private void OnCallbackPropertyChanged()
{
    // TODO: Implement logic
}
</pre><h2 id="adding-validation">Adding validation<a class="headerlink" href="#adding-validation" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h2>
<p>It is very easy to add validation to a class (both the <em>ModelBase</em> and <em>ViewModelBase</em>). There are several ways, but this getting started guide will handle only the most simple one.</p>
<p>To enable validation, you must override at least one of the following methods:</p>
<pre class="nocode">{.java data-syntaxhighlighter-params=&quot;brush: java; gutter: false; theme: Confluence&quot; data-theme=&quot;Confluence&quot; style=&quot;brush: java; gutter: false; theme: Confluence&quot;}
/// &lt;summary&gt;
/// Validates the field values of this object. Override this method to enable
/// validation of field values.
/// &lt;/summary&gt;
/// &lt;param name=&quot;validationResults&quot;&gt;The validation results, add additional results to this list.&lt;/param&gt;
protected override void ValidateFields(List&lt;FieldValidationResult&gt; validationResults)
{
    if (string.IsNullOrEmpty(FirstName))
    {
        validationResults.Add(FieldValidationResult.CreateError(FirstNameProperty, &quot;First name cannot be empty&quot;));
    }
}

/// &lt;summary&gt;
/// Validates the field values of this object. Override this method to enable
/// validation of field values.
/// &lt;/summary&gt;
/// &lt;param name=&quot;validationResults&quot;&gt;The validation results, add additional results to this list.&lt;/param&gt;
protected override void ValidateBusinessRules(List&lt;BusinessRuleValidationResult&gt; validationResults)
{
    if (SomeBusinessErrorOccurs)
    {
        validationResults.Add(BusinessRuleValidationResult.CreateError(&quot;A business error occurred&quot;));
    }
}
</pre><p>After the validation is implemented into the object, the validation will occur every time a property on the object changes. It is also possible to manually validate by calling the Validate method.</p>
<p>There are also other ways to add validation to a data object:</p>
<ul>
<li> Validation via data annotations - attributes such as the <em>RequiredAttribute</em></li>
<li>Validation via <em>IValidator</em> - custom validation such as <em>FluentValidation</em></li>
</ul>
<p>The great thing is that Catel will gather all validation results from all different mappings and combine these into the <em>ValidationContext</em>. This context can be used to query all sorts of validation info about an object.</p>
<p>Note that this is just an introduction, more information about validation can be found in other parts of the documentation</p>
<h2 id="saving-objects">Saving objects<a class="headerlink" href="#saving-objects" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h2>
<p>Saving and loading objects out of the box has never been so easy. <em>SavableModelBase</em> can automatically save/load objects in several ways, such as memory, file in different modes (binary and XML). This example shows that making your objects savable is very easy and does not take any time!</p>
<p><strong>Code snippets</strong></p>
<ul>
<li>model - Declare a model based on the <em>ModelBase</em> class</li>
<li>modelprop - Declare a simple property on a model</li>
</ul>
<p><strong>Steps</strong></p>
<ol>
<li>Create a new class file called <em>Person.cs</em>.</li>
<li>Inside the namespace, use the <em>model</em> codesnippet and fill in the name of the class, in this case <em>Person</em>.</li>
<li>Change the base class from <em>ModelBase</em> to <em>SavableModelBase</em>.</li>
<li>In the Properties region, use the code snippet <em>modelprop</em>, and use the following values:</li>
</ol>
<p>Code snippet item</p>
<p>Value</p>
<p>description</p>
<p>Gets or sets the name</p>
<p>type</p>
<p>string</p>
<p>name</p>
<p>Name</p>
<p>defaultvalue</p>
<p>&quot;MyName&quot;</p>
<p><strong>Code</strong></p>
<pre class="nocode">{.java data-syntaxhighlighter-params=&quot;brush: java; gutter: false; theme: Confluence&quot; data-theme=&quot;Confluence&quot; style=&quot;brush: java; gutter: false; theme: Confluence&quot;}
/// &lt;summary&gt; 
/// Person class which fully supports serialization, property changed notifications,
/// backwards compatibility and error checking.
/// &lt;/summary&gt; 
[Serializable]
public class Person : SavableModelBase&lt;Person&gt;
{
    #region Fields
    #endregion 

    #region Constructors
    /// &lt;summary&gt; 
    /// Initializes a new object from scratch.
    /// &lt;/summary&gt; 
    public Person()
    { }

    /// &lt;summary&gt; 
    /// Initializes a new object based on &lt;see cref=&quot;SerializationInfo&quot;/&gt;.
    /// &lt;/summary&gt; 
    /// &lt;param name=&quot;info&quot;&gt;&lt;see
    ///     cref=&quot;SerializationInfo&quot;/&gt; that contains the information.
    /// &lt;/param&gt; 
    /// &lt;param name=&quot;context&quot;&gt;&lt;see
    //       cref=&quot;StreamingContext&quot;/&gt;.&lt;/param&gt; 
    protected Person(SerializationInfo info, StreamingContext context)
        : base(info, context) { }
    #endregion 

    #region Properties
    /// &lt;summary&gt; 
    /// Gets or sets the name.
    /// &lt;/summary&gt; 
    public string Name
    {
        get { return GetValue&lt;string&gt;(NameProperty); }
        set { SetValue(NameProperty, value); }
    }
    /// &lt;summary&gt; 
    /// Register the Name property so it is known in the class.
    /// &lt;/summary&gt; 
    public static readonly PropertyData NameProperty = RegisterProperty(&quot;Name&quot;, typeof(string), &quot;MyName&quot;);
    #endregion 

    #region Methods
    #endregion 
}
</pre><h3 id="loading-an-object">Loading an object<a class="headerlink" href="#loading-an-object" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h3>
<p>Loading an object is really simple once the class has been created. It is important to use the static method on the class:</p>
<pre class="nocode">{.java data-syntaxhighlighter-params=&quot;brush: java; gutter: false; theme: Confluence&quot; data-theme=&quot;Confluence&quot; style=&quot;brush: java; gutter: false; theme: Confluence&quot;}
var person = Person.Load(@&quot;c:\person.dob&quot;);
</pre><h3 id="saving-an-object">Saving an object<a class="headerlink" href="#saving-an-object" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h3>
<p>To save an object, an instance is required. Then simply call the <em>Save</em> method.</p>
<pre class="nocode">{.java data-syntaxhighlighter-params=&quot;brush: java; gutter: false; theme: Confluence&quot; data-theme=&quot;Confluence&quot; style=&quot;brush: java; gutter: false; theme: Confluence&quot;}
var person = new Person();
person.Name = &quot;John Doe&quot;;
person.Save(@&quot;c:\person.dob&quot;);
</pre>
                    </div>
                </div>
                <footer>
                    <hr />
                    <div role="contentinfo">

                    </div>
                </footer>
            </div>
        </section>
    </div>
    <script src="../js/jquery-2.1.1.min.js"></script>
    <script src="../js/modernizr-2.8.3.min.js"></script>
    <script src="../js/highlight.pack.js"></script>
    <script src="../js/theme.js"></script>

</body>
</html>
