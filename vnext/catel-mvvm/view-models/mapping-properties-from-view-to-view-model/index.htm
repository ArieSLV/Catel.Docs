<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Mapping properties from view to view model - Catel documentation</title>
    <link rel="shortcut icon" href="../../../favicon.ico">
    <link rel="stylesheet" href="../../../css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../../../css/theme_colors.css" type="text/css" />
    <link rel="stylesheet" href="../../../css/styles/vs.css">
    <link rel="stylesheet" href="../../../css/font-awesome.4.5.0.min.css">
</head>
<body role="document">
    <div class="grid-for-nav">
        <nav data-toggle="nav-shift" class="nav-side stickynav">
            <div class="side-nav-search">
                <a href="/welcome/index.htm"><i class="fa fa-home"></i> Catel documentation</a>
                <div role="search">
                    <form id="search-form" class="form" action="../../../Docnet_search.htm" method="get">
                        <input type="text" name="q" placeholder="Search docs" />
                    </form>
                </div>
            </div>
            <div class="menu menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
<ul>
<li class="tocentry"><a href="../../../Home.htm">Home</a>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../../introduction/">Introduction</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../../faq/">FAQ</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../../setup-deployment/">Setup, deployment & projects</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../../getting-started/">Getting started</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../../examples/">Examples</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../../catel-core/">Catel.Core</a></span>
</li>
<li class="tocentry">
<ul>
<li><span class="navigationgroup"><i class="fa fa-caret-down"></i> <a href="../../../catel-mvvm/">Catel.MVVM</a></span></li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../../catel-mvvm/auditing/">Auditing</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../../catel-mvvm/behaviors-triggers/">Behaviors & triggers</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../../catel-mvvm/bindings/">Bindings</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../../catel-mvvm/commands-events/">Commands & events</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../../catel-mvvm/converters/">Converters</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../../catel-mvvm/designers/">Designers</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../../catel-mvvm/locators-naming-conventions/">Locators & naming conventions</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../../catel-mvvm/services/">Services</a></span>
</li>
<li class="tocentry">
<ul>
<li><span class="navigationgroup"><i class="fa fa-caret-down"></i> <a href="../../../catel-mvvm/view-models/">View models</a></span></li>
<li class="tocentry"><a href="../../../catel-mvvm/view-models/introduction/">Introduction</a>
</li>
<li class="tocentry"><a href="../../../catel-mvvm/view-models/creating-basic-view-model/">Creating a basic view model</a>
</li>
<li class="tocentry"><a href="../../../catel-mvvm/view-models/creating-view-model-with-model/">Creating a view model with a model</a>
</li>
<li class="tocentry"><a href="../../../catel-mvvm/view-models/creating-view-model-with-model-and-mappings/">Creating a view model with a model and mappings</a>
</li>
<li class="tocentry current"><a class="current" href="../../../catel-mvvm/view-models/mapping-properties-from-view-to-view-model/">Mapping properties from view to view model</a>
<ul class="currentrelative">
<li class="tocentry"><a href="#example-implementation">Example implementation</a></li>
<li class="tocentry"><a href="#important-note-starting-with-catel-4.0">Important note starting with Catel 4.0</a></li>
<li class="tocentry"><a href="#mapping-types">Mapping types</a></li>
</ul>
<li class="tocentry"><a href="../../../catel-mvvm/view-models/nested-view-models/">Nested view models</a>
</li>
<li class="tocentry"><a href="../../../catel-mvvm/view-models/validation-in-view-models/">Validation in view models</a>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../../catel-mvvm/view-models/advanced/">Advanced</a></span>
</li>

</ul>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../../catel-mvvm/views/">Views</a></span>
</li>

</ul>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../../catel-fody/">Catel.Fody</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../../catel-resharper/">Catel.ReSharper</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../../tips-tricks/">Tips & tricks</a></span>
</li>
<li class="tocentry">
<span class="navigationgroup"><i class="fa fa-caret-right"></i> <a href="../../../reference/">API reference</a></span>
</li>

</ul>
				<div class="toc-footer">
					<span class="text-small">
						<hr/>
						<a href="https://github.com/FransBouma/DocNet" target="_blank">Made with <i class="fa fa-github"></i> DocNet</a>
					</span>
				</div>	
			</div>
            &nbsp;
        </nav>
        <section data-toggle="nav-shift" class="nav-content-wrap">
            <nav class="nav-top" role="navigation" aria-label="top navigation">
                <i data-toggle="nav-top" class="fa fa-bars"></i>
                <a href="../../../index.htm">Catel documentation</a>
            </nav>
            <div class="nav-content">
                <div role="navigation" aria-label="breadcrumbs navigation">
                    <div class="breadcrumbs">
<ul><li><a href="../../../Home.htm">Home</a></li> / <li><a href="../../../catel-mvvm/index.htm">Catel.MVVM</a></li> / <li><a href="../../../catel-mvvm/view-models/index.htm">View models</a></li> / <li><a href="../../../catel-mvvm/view-models/mapping-properties-from-view-to-view-model/index.htm">Mapping properties from view to view model</a></li></ul>

                    </div>
                    <hr />
                </div>
                <div role="main">
                    <div class="section">
<h1 id="mapping-properties-from-view-to-view-model">Mapping properties from view to view model<a class="headerlink" href="#mapping-properties-from-view-to-view-model" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h1>
<p>Sometimes a view (for example, a user control) contains additional properties besides the <code>DataContext</code> to interact with the view model. By default, it is hard to implement this in an MVVM sccenario, but Catel solves this issue using the <code>ViewToViewModel</code> attribute.</p>
<p>This attribute automatically keeps track of changes in both the view and the view model and this way, a control can have several properties and still implement MVVM.</p>
<h2 id="example-implementation">Example implementation<a class="headerlink" href="#example-implementation" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h2>
<p>The example below shows how the <code>MapCenter</code> is a dependency property on the control. It automatically maps the property to the <code>ViewModel.MapCenter</code> property.</p>
<pre class="nocode">public partial class MyControl : UserControl
{
    static MyControl()
    {
        typeof(MyControl).AutoDetectViewPropertiesToSubscribe();
    }
 
    public MyControl()
    {
        InitializeComponent();
    }
 
    [ViewToViewModel(MappingType = ViewToViewModelMappingType.ViewModelToView)]
    public GeoCoordinate MapCenter
    {
        get { return (GeoCoordinate) GetValue(MapCenterProperty); }
        set { SetValue(MapCenterProperty, value); }
    }
 
    // Using a DependencyProperty as the backing store for MapCenter.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty MapCenterProperty = DependencyProperty.Register(&quot;MapCenter&quot;, typeof (GeoCoordinate),
        typeof (MyControl), new PropertyMetadata(null, (sender, e) =&gt; ((MyControl) sender).UpdateMapCenter()));
 
    private void UpdateMapCenter()
    {
        map.SetView(ViewModel.MapCenter, ViewModel.ZoomLevel);
    }
 
    public new MainPageViewModel ViewModel
    {
        get { return base.ViewModel as MainPageViewModel; }
    }
}
</pre><h2 id="important-note-starting-with-catel-4.0">Important note starting with Catel 4.0<a class="headerlink" href="#important-note-starting-with-catel-4.0" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h2>
<p>Starting with 4.0, Catel no longer subscribes to dependency properties automatically. It is best to let Catel only subscribe to the properties that it should (for the best performance). To do so, use the <code>IViewPropertySelector.AddPropertyToSubscribe</code> method to add properties:</p>
<pre class="nocode">var serviceLocator = ServiceLocator.Default;
var viewPropertySelector = serviceLocator.ResolveType&lt;IViewPropertySelector&gt;();
 
viewPropertySelector.AddPropertyToSubscribe(&quot;MyProperty&quot;, typeof(MyView));
</pre><p>In most cases, the only reason to subscribe to property changes is because of the <code>ViewToViewModel</code> attribute. If that is the case, it is best to use the extension method <code>AutoDetectViewPropertiesToSubscribe</code> in the static constructor of the view:</p>
<pre class="nocode">static MyView()
{
    typeof(MyView).AutoDetectViewPropertiesToSubscribe();
}
</pre><h2 id="mapping-types">Mapping types<a class="headerlink" href="#mapping-types" title="Permalink to this headline"><i class="fa fa-link" aria-hidden="true"></i></a></h2>
<p>Catel supports the following mapping types using the <code>ViewToViewModelMappingType</code> enum.</p>
<p>Type</p>
<p>Description</p>
<p>TwoWayDoNothing</p>
<p>Two way, which means that either the view or the view model will update the values of the other party as soon as they are updated.</p>
<p>When this value is used, nothing happens when the view model of the view changes. This way, it might be possible that the values of the view and the view model are different. The first one to update next will update the other.</p>
<p>TwoWayViewWins</p>
<p>Two way, which means that either the view or the view model will update the values of the other party as soon as they are updated.</p>
<p>When this value is used, the value of the view is used when the view model of the view is changed, and is directly transferred to the view model value</p>
<p>TwoWayViewModelWins</p>
<p>Two way, which means that either the view or the view model will update the values of the other party as soon as they are updated.</p>
<p>When this value is used, the value of the view model is used when the view model of the view is changed, and is directly transferred to the view value.</p>
<p>ViewToViewModel</p>
<p>The mapping is from the view to the view model only.</p>
<p>ViewModelToView</p>
<p>The mapping is from the view model to the view only.</p>

                    </div>
                </div>
                <footer>
                    <hr />
                    <div role="contentinfo">

                      <p>
					    Is this section not up-to-date or found an issue? Please <a href="https://github.com/Catel/Catel.Docs/blob/master/src/../src/vnext/catel-mvvm/view-models/mapping-properties-from-view-to-view-model.md" target="_blank">contribute</a>!
					  </p>
					  <p>
					    Have a question about Catel? Use <a href="https://stackoverflow.com/questions/tagged/catel" target="_blank">StackOverflow</a> with the <i>Catel</i> tag!
					  </p>
					  <hr />
					  <p>
					    <h2>Discussion</h2>
					   <div id="disqus_thread"></div>
					   <script>
					   var disqus_config = function () {
					   this.page.url = 'http://docs.catelproject.com/catel-mvvm/view-models/mapping-properties-from-view-to-view-model/index.htm';
					   this.page.identifier = '../src/vnext/catel-mvvm/view-models/mapping-properties-from-view-to-view-model.md';
					   };
					   (function() { // DON'T EDIT BELOW THIS LINE
					   var d = document, s = d.createElement('script');
					   s.src = 'https://catel-docs.disqus.com/embed.js';
					   s.setAttribute('data-timestamp', +new Date());
					   (d.head || d.body).appendChild(s);
					   })();
					   </script>
					   <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
					  </p>
					</div>
                </footer>
            </div>
        </section>
    </div>
    <script src="../../../js/jquery-2.1.1.min.js"></script>
    <script src="../../../js/modernizr-2.8.3.min.js"></script>
    <script src="../../../js/highlight.pack.js"></script>
    <script src="../../../js/theme.js"></script>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    
      ga('create', 'UA-25600919-4', 'auto');
      ga('send', 'pageview');
    
    </script>
</body>
</html>
